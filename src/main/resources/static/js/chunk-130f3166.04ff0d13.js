(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-130f3166"],{1764:function(e,t,i){"use strict";i("ce93")},4391:function(e,t,i){},"4e89":function(e,t,i){"use strict";i("b459")},"6d26":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper",total:e.total,"current-page":e.currentPageDiy,"page-size":e.pageSizeDiy,"page-sizes":[5,10,20,50]},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})},s=[],o=(i("a9e3"),{name:"MyPagination",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0}},data:function(){return{currentPageDiy:1,pageSizeDiy:10}},methods:{handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleSizeChange:function(e){this.$emit("handleSizeChange",e)}},watch:{currentPage:function(e,t){this.currentPageDiy=e},pageSize:function(e,t){this.pageSizeDiy=e}}}),a=o,r=(i("4e89"),i("2877")),l=Object(r["a"])(a,n,s,!1,null,"8756b672",null);t["a"]=l.exports},a719:function(e,t,i){"use strict";i("4391")},b459:function(e,t,i){},ce93:function(e,t,i){},eb30:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{background:e.color},attrs:{id:"score-card"}},[i("div",{on:{click:e.showDialog}},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",{attrs:{span:18}},[i("p",{staticClass:"content"},[e._v(e._s(e.mapList.classify))]),i("span",{staticClass:"number"},[i("span",[e._v(e._s(e.mapList.score))]),i("span",{staticClass:"unit"},[e._v("(分)")])])]),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"flex-div"},[i("svg-icon",{staticClass:"icon",attrs:{"icon-class":e.icon}})],1)])],1)],1),i("el-dialog",{attrs:{visible:e.vis,title:"记录详情"},on:{"update:visible":function(t){e.vis=t},close:e.closeDialog}},[i("el-row",{staticClass:"select-row"},[i("el-col",{attrs:{span:16}},[i("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","range-separator":"至","end-placeholder":"结束日期"},model:{value:e.timeSearch,callback:function(t){e.timeSearch=t},expression:"timeSearch"}})],1)],1),i("el-table",{attrs:{data:e.recordCompute.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize),title:"记录明细",border:""}},[i("el-table-column",{attrs:{label:"执行人",prop:"executorName"}}),i("el-table-column",{attrs:{label:"计分分类",prop:"classify"}}),i("el-table-column",{attrs:{label:"计分原因",prop:"reason"}}),i("el-table-column",{attrs:{label:"加分",prop:"addScore"}}),i("el-table-column",{attrs:{label:"扣分",prop:"desScore"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.desScore>0?-t.row.desScore:t.row.desScore)+" ")]}}])}),i("el-table-column",{attrs:{label:"时间",prop:"gmtRecord"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFilter")(t.row.gmtRecord))+" ")]}}])})],1),i("my-pagination",{attrs:{total:e.recordCompute.length,"current-page":e.currentPage,"page-size":e.pageSize},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)],1)},s=[],o=(i("4de4"),i("a9e3"),i("6d26")),a={name:"ScoreCard",components:{MyPagination:o["a"]},props:{index:{type:Number},mapList:{type:Object,default:function(){}},visible:{type:Boolean},records:{type:Array,default:function(){return[]}},color:{type:String},icon:{type:String},currentPage:{type:Number,default:1},pageSize:{type:Number,default:10}},data:function(){return{vis:!1,selection:"",selectionOption:[],timeSearch:[]}},methods:{showDialog:function(){this.index<5&&this.$emit("showDialog",this.index)},closeDialog:function(){this.index<5&&this.$emit("closeDialog",this.index)},handleCurrentChange:function(e){this.$emit("handleSubCurrentChange",e,this.index)},handleSizeChange:function(e){this.$emit("handleSubSizeChange",e,this.index)}},watch:{visible:function(e,t){this.vis=e}},computed:{recordCompute:function(){var e=this;return this.timeSearch.length>1?this.records.filter((function(t){var i=new Date(t.gmtRecord);return!(e.timeSearch.length>1)||i.getTime()>=e.timeSearch[0].getTime()&&i.getTime()<=e.timeSearch[1].getTime()})):this.records}},filters:{dateFilter:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}}},r=a,l=(i("1764"),i("2877")),c=Object(l["a"])(r,n,s,!1,null,"c341cc0c",null);t["a"]=c.exports},ee96:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-card",[-1===e.user.logo?i("div",{staticClass:"flex-div",attrs:{slot:"header"},slot:"header"},e._l(e.scoreList,(function(t,n){return i("score-card",{key:n,staticClass:"score-card",attrs:{visible:e.visibleList[n],"map-list":e.scoreList[n],records:e.records,index:n,color:e.colorList[n],icon:e.iconList[n],"current-page":e.currentPage[n],"page-size":e.pageSize[n]},on:{closeDialog:e.closeDialog,showDialog:e.showDialog,handleSubCurrentChange:e.handleSubCurrentChange,handleSubSizeChange:e.handleSubSizeChange}})})),1):e._e(),i("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("el-col",{attrs:{span:6}},[i("el-form",{attrs:{data:e.user,"label-position":"right","label-width":"100px"}},[-1===e.user.logo?i("el-form-item",{attrs:{label:"教职工编号："}},[i("span",[e._v(e._s(e.user.no))])]):e._e(),i("el-form-item",{attrs:{label:"教工姓名："}},[e.visible[1]?i("span",[e._v(e._s(e.user.name))]):e._e(),e.visible[1]&&1===e.user.logo?i("i",{staticClass:"el-icon-edit my-icon",on:{click:function(t){return e.modifyPro(1)}}}):e._e(),e.visible[1]?e._e():i("el-input",{staticClass:"input-80",model:{value:e.nameComputed,callback:function(t){e.nameComputed=t},expression:"nameComputed"}}),e.visible[1]?e._e():i("i",{staticClass:"el-icon-check my-icon inline-block-icon",on:{click:function(t){return e.confirmModify(1,"name")}}})],1),i("el-form-item",{attrs:{label:"用户名："}},[e.visible[2]?i("span",[e._v(e._s(e.user.username))]):e._e(),e.visible[2]&&e.user.logo<=1?i("i",{staticClass:"el-icon-edit my-icon",on:{click:function(t){return e.modifyPro(2)}}}):e._e(),e.visible[2]?e._e():i("el-input",{staticClass:"input-80",model:{value:e.usernameComputed,callback:function(t){e.usernameComputed=t},expression:"usernameComputed"}}),e.visible[2]?e._e():i("i",{staticClass:"el-icon-check my-icon inline-block-icon",on:{click:function(t){return e.confirmModify(2,"username")}}})],1),i("el-form-item",{attrs:{label:"密码："}},[e.visible[3]?i("span",[e._v("******")]):e._e(),e.visible[3]&&e.user.logo<=1?i("i",{staticClass:"el-icon-edit my-icon",on:{click:function(t){return e.modifyPro(3)}}}):e._e(),e.visible[3]?e._e():i("el-input",{staticClass:"input-80",model:{value:e.passwordComputed,callback:function(t){e.passwordComputed=t},expression:"passwordComputed"}}),e.visible[3]?e._e():i("i",{staticClass:"el-icon-check my-icon inline-block-icon",on:{click:function(t){return e.confirmModify(3,"password")}}})],1),i("el-form-item",{attrs:{label:"性别："}},[e.visible[4]?i("span",[e._v(e._s(e._f("genderFilter")(e.user.gender)))]):e._e(),e.visible[4]&&e.user.logo<=1?i("i",{staticClass:"el-icon-edit my-icon",on:{click:function(t){return e.modifyPro(4)}}}):e._e(),e.visible[4]?e._e():i("el-select",{staticClass:"input-80",model:{value:e.genderComputed,callback:function(t){e.genderComputed=t},expression:"genderComputed"}},e._l(e.genderOption,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),e.visible[4]?e._e():i("i",{staticClass:"el-icon-check my-icon inline-block-icon",on:{click:function(t){return e.confirmModify(4,"gender")}}})],1),i("el-form-item",{attrs:{label:"电话："}},[e.visible[5]?i("span",[e._v(e._s(e.user.phone))]):e._e(),e.visible[5]&&e.user.logo<=1?i("i",{staticClass:"el-icon-edit my-icon",on:{click:function(t){return e.modifyPro(5)}}}):e._e(),e.visible[5]?e._e():i("el-input",{staticClass:"input-80",model:{value:e.phoneComputed,callback:function(t){e.phoneComputed=t},expression:"phoneComputed"}}),e.visible[5]?e._e():i("i",{staticClass:"el-icon-check my-icon inline-block-icon",on:{click:function(t){return e.confirmModify(5,"phone")}}})],1)],1)],1),-1===e.user.logo?i("el-col",{attrs:{span:14}},[i("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"",data:e.schedule,"highlight-hover-row":!0,"cell-class-name":e.cellClassName}},[i("vxe-table-column",{attrs:{field:"no",title:"节",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(" 第"+e._s(i.no)+"节 ")]}}],null,!1,2145477168)}),i("vxe-table-column",{attrs:{field:"monday",title:"星期一"}}),i("vxe-table-column",{attrs:{field:"tuesday",title:"星期二"}}),i("vxe-table-column",{attrs:{field:"wednesday",title:"星期三"}}),i("vxe-table-column",{attrs:{field:"thursday",title:"星期四"}}),i("vxe-table-column",{attrs:{field:"friday",title:"星期五"}})],1)],1):e._e()],1)],1)],1)],1)},s=[],o=(i("a4d3"),i("e01a"),i("b0c0"),i("eb30")),a={name:"UserInfo",components:{ScoreCard:o["a"]},data:function(){return{user:this.$store.state.user,visibleList:[!1,!1,!1,!1,!1,!1,!1,!1],schedule:[],records:[],visible:[!0,!0,!0,!0,!0,!0],genderOption:[{label:"男",value:1},{label:"女",value:0}],colorList:["#FFA3A1","#84d9d2","#87DE75","#a5e7f0","#93b7e3","#edafda","#8c99e0","#FFA3A1"],iconList:["food-pistachio","food-strawberry","food-popsicle","doughnut","bread","cookie","macaron","food-pistachio"],currentPage:[1,1,1,1,1,1,1,1],pageSize:[10,10,10,10,10,10,10,10],scoreList:[]}},methods:{getTchRecord:function(){var e=this,t=new FormData;t.set("id",this.user.id),this.$api.getTchRecord(t).then((function(t){e.records=t.data}))},showDialog:function(e){this.$set(this.visibleList,e,!0)},closeDialog:function(e){this.$set(this.visibleList,e,!1)},modifyPro:function(e){this.$set(this.visible,e,!1)},confirmModify:function(e,t){var i=this;this.$set(this.visible,e,!0);var n=new FormData;n.set("id",this.user.id),n.set("changePro",t),n.set("proValue",this.user[t]),this.$api.modifyInfo(n).then((function(e){i.$showMsg("success",e.description)}))},cellClassName:function(e){if(0===e.columnIndex)return"bold"},getUserSchedule:function(){var e=this,t=new FormData;t.append("userId",this.user.id),this.$api.getUserSchedule(t).then((function(t){e.schedule=t.data?t.data:[]}))},handleSubCurrentChange:function(e,t){this.$set(this.currentPage,t,e)},handleSubSizeChange:function(e,t){this.$set(this.pageSize,t,e)}},computed:{noComputed:{get:function(){return this.$store.state.user.no},set:function(e){this.$store.commit("modifyUser",{changePro:"no",proValue:e})}},nameComputed:{get:function(){return this.$store.state.user.name},set:function(e){this.$store.commit("modifyUser",{changePro:"name",proValue:e})}},usernameComputed:{get:function(){return this.$store.state.user.username},set:function(e){this.$store.commit("modifyUser",{changePro:"username",proValue:e})}},passwordComputed:{get:function(){return this.$store.state.user.password},set:function(e){this.$store.commit("modifyUser",{changePro:"password",proValue:e})}},genderComputed:{get:function(){return this.$store.state.user.gender},set:function(e){this.$store.commit("modifyUser",{changePro:"gender",proValue:e})}},phoneComputed:{get:function(){return this.$store.state.user.phone},set:function(e){this.$store.commit("modifyUser",{changePro:"phone",proValue:e})}}},filters:{genderFilter:function(e){return 1===e?"男":"女"}},created:function(){-1===this.user.logo&&(this.scoreList=Object.assign([],this.user.mapList),this.scoreList.push({classify:"平均专项积分",score:this.user.scoreSpecialAverage},{classify:"年度积分",score:this.user.scoreAnnual},{classify:"平均年度积分",score:this.user.scoreAnnualAverage}),this.getUserSchedule())},mounted:function(){this.getTchRecord()}},r=a,l=(i("a719"),i("2877")),c=Object(l["a"])(r,n,s,!1,null,"5774bac9",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-130f3166.04ff0d13.js.map