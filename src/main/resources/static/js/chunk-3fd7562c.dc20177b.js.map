{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/DepartmentManage.vue?b00f","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./src/views/DepartmentManage.vue?31a9","webpack:///src/views/DepartmentManage.vue","webpack:///./src/views/DepartmentManage.vue?06e4","webpack:///./src/views/DepartmentManage.vue"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","CHROME_VERSION","IS_NODE","STRICT_METHOD","USES_TO_LENGTH","1","CHROME_BUG","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","$includes","includes","addToUnscopables","ACCESSORS","el","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right","render","_vm","_h","$createElement","_c","_self","attrs","slot","_v","staticClass","on","$event","dialogAssignRuleDialog","departments","mergeRowMethod","scopedSlots","_u","key","fn","showDialogAddDepartment","proxy","addAffiliate1","addAffiliate2","dialogDepartmentVisible","cancelAddDepartment","staticStyle","model","value","newDepartment","callback","$$v","$set","expression","_e","_l","item","label","addDepartment","cancelDepartmentAddRule","departmentRule","reason","departmentAddRule","staticRenderFns","name","data","user","$store","state","value1","ifAddAffiliate2","logo","department","ruleCheckList","methods","getDepartments","$api","then","cellValue","fields","column","property","prevRow","nextRow","visibleData","countRowspan","_rowIndex","ifAddDepartment","ifAddAffiliate1","affiliate1","affiliate2","username","password","phone","arrDistinctByProp","arr","preValue","getDepartmentOption","getClassify","formData","append","classify","getCheckRuleList","computed","optionComputedAffiliate1","optionComputedAffiliate2","rules","filter","watch","newValue","component"],"mappings":"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","file":"static/js/chunk-3fd7562c.dc20177b.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentManage.vue?vue&type=style&index=0&id=3e4a17d6&scoped=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"middle\",\"justify\":\"space-between\"}},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"部门管理\")]),_c('el-col',{staticClass:\"btn-area\",attrs:{\"span\":12}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogAssignRuleDialog = true}}},[_vm._v(\"为部门分配规则权限\")])],1)],1)],1),_c('vxe-table',{attrs:{\"border\":\"\",\"resizable\":\"\",\"show-overflow\":\"\",\"data\":_vm.departments,\"highlight-hover-row\":true,\"span-method\":_vm.mergeRowMethod,\"align\":\"center\"}},[_c('vxe-table-column',{attrs:{\"type\":\"seq\",\"width\":\"60\"}}),_c('vxe-table-column',{attrs:{\"field\":\"name\",\"title\":\"部门名\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" 部门名 \"),_c('i',{staticClass:\"el-icon-plus pointer\",on:{\"click\":_vm.showDialogAddDepartment}})]},proxy:true}])}),_c('vxe-table-column',{attrs:{\"field\":\"affiliate1\",\"title\":\"子部门\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" 子部门 \"),_c('i',{staticClass:\"el-icon-plus pointer\",on:{\"click\":_vm.addAffiliate1}})]},proxy:true}])}),_c('vxe-table-column',{attrs:{\"field\":\"affiliate2\",\"title\":\"子子部门\"},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\" 子子部门 \"),_c('i',{staticClass:\"el-icon-plus pointer\",on:{\"click\":_vm.addAffiliate2}})]},proxy:true}])})],1)],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogDepartmentVisible,\"title\":'新增部门'},on:{\"update:visible\":function($event){_vm.dialogDepartmentVisible=$event},\"close\":_vm.cancelAddDepartment}},[_c('el-form',{staticClass:\"form-new-department\",attrs:{\"label-width\":\"100px\",\"label-position\":\"left\"}},[(_vm.ifAddDepartment)?_c('el-form-item',{attrs:{\"label\":\"部门名：\"}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},model:{value:(_vm.newDepartment.name),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"name\", $$v)},expression:\"newDepartment.name\"}})],1):_vm._e(),(_vm.ifAddAffiliate1)?_c('el-form-item',{attrs:{\"label\":\"父部门：\"}},[_c('el-select',{model:{value:(_vm.newDepartment.supDepartment),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"supDepartment\", $$v)},expression:\"newDepartment.supDepartment\"}},_vm._l((_vm.optionComputedAffiliate1),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),(_vm.ifAddAffiliate2)?_c('el-form-item',{attrs:{\"label\":\"父父部门：\"}},[_c('el-select',{model:{value:(_vm.newDepartment.supSupDepartment),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"supSupDepartment\", $$v)},expression:\"newDepartment.supSupDepartment\"}},_vm._l((_vm.optionComputedAffiliate2),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"用户名：\"}},[_c('el-input',{model:{value:(_vm.newDepartment.username),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"username\", $$v)},expression:\"newDepartment.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码：\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.newDepartment.password),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"password\", $$v)},expression:\"newDepartment.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"部门电话：\"}},[_c('el-input',{model:{value:(_vm.newDepartment.phone),callback:function ($$v) {_vm.$set(_vm.newDepartment, \"phone\", $$v)},expression:\"newDepartment.phone\"}})],1),_c('el-form-item',[_c('div',{staticClass:\"btn-area\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDepartment}},[_vm._v(\"确定\")]),_c('el-button',{on:{\"click\":_vm.cancelAddDepartment}},[_vm._v(\"取消\")])],1)])],1)],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogAssignRuleDialog,\"title\":'为部门分配规则权限'},on:{\"update:visible\":function($event){_vm.dialogAssignRuleDialog=$event},\"close\":_vm.cancelDepartmentAddRule}},[_c('el-form',{attrs:{\"label-width\":\"100px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"选择部门：\"}},[_c('el-select',{model:{value:(_vm.departmentRule.department),callback:function ($$v) {_vm.$set(_vm.departmentRule, \"department\", $$v)},expression:\"departmentRule.department\"}},_vm._l((_vm.departmentOption),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"计分分类：\"}},[_c('el-select',{model:{value:(_vm.departmentRule.classify),callback:function ($$v) {_vm.$set(_vm.departmentRule, \"classify\", $$v)},expression:\"departmentRule.classify\"}},_vm._l((_vm.classifyOption),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"选择权限：\"}},[_c('el-checkbox-group',{model:{value:(_vm.departmentRule.ruleCheckList),callback:function ($$v) {_vm.$set(_vm.departmentRule, \"ruleCheckList\", $$v)},expression:\"departmentRule.ruleCheckList\"}},_vm._l((_vm.ruleCompute),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.reason}})}),1)],1),_c('el-form-item',[_c('div',{staticClass:\"btn-area\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.departmentAddRule}},[_vm._v(\"确定\")]),_c('el-button',{on:{\"click\":_vm.cancelDepartmentAddRule}},[_vm._v(\"取消\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<el-card>\r\n\t\t\t<div slot=\"header\">\r\n\t\t\t\t<el-row type=\"flex\" align=\"middle\" justify=\"space-between\">\r\n\t\t\t\t\t<el-col :span=\"12\">部门管理</el-col>\r\n\t\t\t\t\t<el-col :span=\"12\" class=\"btn-area\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"dialogAssignRuleDialog = true\">为部门分配规则权限</el-button>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</div>\r\n\t\t\t<vxe-table border resizable show-overflow :data=\"departments\"\r\n\t\t\t           :highlight-hover-row=\"true\"\r\n\t\t\t           :span-method=\"mergeRowMethod\" align=\"center\">\r\n\t\t\t\t<vxe-table-column type=\"seq\" width=\"60\"></vxe-table-column>\r\n\t\t\t\t<vxe-table-column field=\"name\" title=\"部门名\">\r\n\t\t\t\t\t<template v-slot:header>\r\n\t\t\t\t\t\t部门名 <i class=\"el-icon-plus pointer\" @click=\"showDialogAddDepartment\"></i>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</vxe-table-column>\r\n\t\t\t\t<vxe-table-column field=\"affiliate1\" title=\"子部门\">\r\n\t\t\t\t\t<template v-slot:header>\r\n\t\t\t\t\t\t子部门 <i class=\"el-icon-plus pointer\" @click=\"addAffiliate1\"></i>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</vxe-table-column>\r\n\t\t\t\t<vxe-table-column field=\"affiliate2\" title=\"子子部门\">\r\n\t\t\t\t\t<template v-slot:header>\r\n\t\t\t\t\t\t子子部门 <i class=\"el-icon-plus pointer\" @click=\"addAffiliate2\"></i>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</vxe-table-column>\r\n\t\t\t</vxe-table>\r\n\t\t</el-card>\r\n\t\t<el-dialog :visible.sync=\"dialogDepartmentVisible\" @close=\"cancelAddDepartment\" :title=\"'新增部门'\">\r\n\t\t\t<el-form class=\"form-new-department\" label-width=\"100px\" label-position=\"left\">\r\n\t\t\t\t<el-form-item label=\"部门名：\" v-if=\"ifAddDepartment\">\r\n\t\t\t\t\t<el-input v-model=\"newDepartment.name\" style=\"width: 50%\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"父部门：\" v-if=\"ifAddAffiliate1\">\r\n\t\t\t\t\t<el-select v-model=\"newDepartment.supDepartment\">\r\n\t\t\t\t\t\t<el-option v-for=\"(item,index) in optionComputedAffiliate1\"\r\n\t\t\t\t\t\t           :label=\"item.label\" :value=\"item.value\" :key=\"index\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"父父部门：\" v-if=\"ifAddAffiliate2\">\r\n\t\t\t\t\t<el-select v-model=\"newDepartment.supSupDepartment\">\r\n\t\t\t\t\t\t<el-option v-for=\"(item,index) in optionComputedAffiliate2\"\r\n\t\t\t\t\t\t           :label=\"item.label\" :value=\"item.value\" :key=\"index\"></el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"用户名：\">\r\n\t\t\t\t\t<el-input v-model=\"newDepartment.username\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码：\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"newDepartment.password\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"部门电话：\">\r\n\t\t\t\t\t<el-input v-model=\"newDepartment.phone\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<div class=\"btn-area\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"addDepartment\">确定</el-button>\r\n\t\t\t\t\t\t<el-button @click=\"cancelAddDepartment\">取消</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog :visible.sync=\"dialogAssignRuleDialog\" :title=\"'为部门分配规则权限'\" @close=\"cancelDepartmentAddRule\">\r\n\t\t\t<el-form label-width=\"100px\" label-position=\"right\">\r\n\t\t\t\t<el-form-item label=\"选择部门：\">\r\n\t\t\t\t\t<el-select v-model=\"departmentRule.department\">\r\n\t\t\t\t\t\t<el-option v-for=\"(item,index) in departmentOption\" :key=\"index\"\r\n\t\t\t\t\t\t           :label=\"item.label\" :value=\"item.value\">\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"计分分类：\">\r\n\t\t\t\t\t<el-select v-model=\"departmentRule.classify\">\r\n\t\t\t\t\t\t<el-option v-for=\"(item,index) in classifyOption\" :key=\"index\"\r\n\t\t\t\t\t\t           :label=\"item.label\" :value=\"item.value\">\r\n\t\t\t\t\t\t</el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"选择权限：\">\r\n\t\t\t\t\t<el-checkbox-group v-model=\"departmentRule.ruleCheckList\">\r\n\t\t\t\t\t\t<el-checkbox v-for=\"(item,index) in ruleCompute\" :label=\"item.reason\" :key=\"index\"></el-checkbox>\r\n\t\t\t\t\t</el-checkbox-group>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<div class=\"btn-area\">\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"departmentAddRule\">确定</el-button>\r\n\t\t\t\t\t\t<el-button @click=\"cancelDepartmentAddRule\">取消</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport XEUtils from 'xe-utils'\r\nexport default {\r\n  name: \"RuleManage\",\r\n  data() {\r\n    return {\r\n      user: this.$store.state.user,\r\n      departments: [],\r\n      dialogDepartmentVisible: false,\r\n      value1: '',\r\n\t    ifAddDepartment: false,\r\n\t    ifAddAffiliate1: false,\r\n      ifAddAffiliate2: false,\r\n\t    newDepartment: {\r\n        name: '',\r\n\t\t    supSupDepartment: '',\r\n\t\t    supDepartment: '',\r\n\t\t    username: '',\r\n\t\t    password: '',\r\n\t\t    phone: '',\r\n        logo: null\r\n\t    },\r\n      dialogAssignRuleDialog: false,\r\n\t    departmentOption: [],\r\n\t    classifyOption: [],\r\n\t    departmentRule: {\r\n        department: '',\r\n\t\t    classify: '',\r\n        ruleCheckList: []\r\n\t    },\r\n\t    rules: []\r\n    }\r\n  },\r\n  methods: {\r\n    getDepartments() {\r\n      this.$api.getDepartments().then(res => {\r\n\t      this.departments = res.data.sort((a, b)=> a.name.localeCompare(b.name, 'zh'))\r\n      })\r\n    },\r\n    mergeRowMethod ({ row, _rowIndex, column, visibleData }) {\r\n      const fields = ['name','affiliate1']\r\n      const cellValue = XEUtils.get(row, column.property)\r\n      if (cellValue && fields.includes(column.property)) {\r\n        const prevRow = visibleData[_rowIndex - 1]\r\n        let nextRow = visibleData[_rowIndex + 1]\r\n        if (prevRow && XEUtils.get(prevRow, column.property) === cellValue) {\r\n          return { rowspan: 0, colspan: 0 }\r\n        } else {\r\n          let countRowspan = 1\r\n          while (nextRow && XEUtils.get(nextRow, column.property) === cellValue) {\r\n            nextRow = visibleData[++countRowspan + _rowIndex]\r\n          }\r\n          if (countRowspan > 1) {\r\n            return { rowspan: countRowspan, colspan: 1 }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    showDialogAddDepartment() {\r\n      this.dialogDepartmentVisible = true\r\n\t\t\tthis.ifAddDepartment = true\r\n\t    this.newDepartment.logo = 2\r\n    },\r\n    addAffiliate1() {\r\n      this.dialogDepartmentVisible = true\r\n      this.ifAddDepartment = true\r\n\t\t\tthis.ifAddAffiliate1 = true\r\n      this.newDepartment.logo = 3\r\n    },\r\n    addAffiliate2() {\r\n      this.dialogDepartmentVisible = true\r\n      this.ifAddDepartment = true\r\n      this.ifAddAffiliate1 = true\r\n\t\t\tthis.ifAddAffiliate2 = true\r\n      this.newDepartment.logo = 4\r\n    },\r\n    cancelAddDepartment() {\r\n      this.ifAddDepartment = false\r\n      this.ifAddAffiliate1 = false\r\n      this.ifAddAffiliate2 = false\r\n      this.dialogDepartmentVisible = false\r\n\t    this.newDepartment = {\r\n        name: '',\r\n        affiliate1: '',\r\n        affiliate2: '',\r\n        username: '',\r\n        password: '',\r\n        phone: '',\r\n        logo: null\r\n      }\r\n    },\r\n    // 去重函数\r\n    arrDistinctByProp(arr,prop){\r\n      let obj = {};\r\n      return arr.reduce(function(preValue,item){\r\n        let _ = obj[item[prop]] ? '' : obj[item[prop]] = preValue.push(item);\r\n        return preValue\r\n      },[])\r\n\r\n    },\r\n    addDepartment() {\r\n      this.$api.addDepartment(this.newDepartment).then(res => {\r\n        this.$showMsg('success',res.description)\r\n\t      this.getDepartments()\r\n\t      this.cancelAddDepartment()\r\n      })\r\n    },\r\n    getDepartmentOption() {\r\n      this.$api.getDepartmentOption().then(res => {\r\n        this.departmentOption = res.data\r\n      })\r\n    },\r\n\t  getClassify() {\r\n      this.$api.getClassify().then(res => {\r\n\t      this.classifyOption = res.data.map(item => {\r\n\t        return {\r\n\t          label: item,\r\n\t\t        value: item\r\n\t        }\r\n\t      })\r\n      })\r\n\t  },\r\n\t  getRule() {\r\n      let formData = new FormData();\r\n      formData.append(\"userId\",this.user.id)\r\n\t\t\tthis.$api.getRule(formData).then(res => {\r\n        this.rules = res.data\r\n\t\t\t})\r\n\t  },\r\n    departmentAddRule() {\r\n      this.$api.departmentAddRule(this.departmentRule).then(res => {\r\n\t\t\t\tthis.$showMsg('success',res.description)\r\n\t      this.cancelDepartmentAddRule()\r\n      })\r\n    },\r\n    cancelDepartmentAddRule() {\r\n      this.dialogAssignRuleDialog = false\r\n\t    this.departmentRule = {\r\n        department: '',\r\n        classify: '',\r\n        ruleCheckList: []\r\n      }\r\n    },\r\n\t  getCheckRuleList(department) {\r\n      let formData = new FormData();\r\n      formData.append(\"department\",department)\r\n      this.$api.getCheckRuleList(formData).then(res => {\r\n\t      this.departmentRule.ruleCheckList = res.data ? res.data : []\r\n      })\r\n\t  }\r\n  },\r\n  computed: {\r\n    optionComputedAffiliate1() {\r\n      return this.arrDistinctByProp(this.departments,this.ifAddAffiliate2 ? 'affiliate1':'name')\r\n\t\t      .map(item => {\r\n        return {\r\n          label: this.ifAddAffiliate2 ? item.affiliate1 : item.name,\r\n          value: this.ifAddAffiliate2 ? item.affiliate1 : item.name\r\n        }\r\n      })\r\n    },\r\n    optionComputedAffiliate2() {\r\n      return this.arrDistinctByProp(this.departments,'name').map(item => {\r\n        return {\r\n          label: item.name,\r\n          value: item.name\r\n        }\r\n      })\r\n    },\r\n\t  ruleCompute() {\r\n      return this.rules.filter(item => item.classify===this.departmentRule.classify)\r\n\t  }\r\n  },\r\n\tmounted() {\r\n    this.getDepartments()\r\n\t\tthis.getDepartmentOption()\r\n\t\tthis.getClassify()\r\n\t\tthis.getRule()\r\n  },\r\n  watch: {\r\n    'departmentRule.department'(newValue, oldValue) {\r\n      if (newValue) {\r\n        this.getCheckRuleList(newValue)\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.btn-area {\r\n\t\ttext-align: right;\r\n\t}\r\n\t.pointer {\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.form-new-department {\r\n\t\t.el-input {\r\n\t\t\twidth: 50%;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DepartmentManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DepartmentManage.vue?vue&type=template&id=3e4a17d6&scoped=true&\"\nimport script from \"./DepartmentManage.vue?vue&type=script&lang=js&\"\nexport * from \"./DepartmentManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DepartmentManage.vue?vue&type=style&index=0&id=3e4a17d6&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e4a17d6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}