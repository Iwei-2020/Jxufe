(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8083780"],{"263b":function(e,t,a){"use strict";a("f257")},"4e89":function(e,t,a){"use strict";a("b459")},"6d26":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper",total:e.total,"current-page":e.currentPageDiy,"page-size":e.pageSizeDiy,"page-sizes":[5,10,20,50]},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})},n=[],i=(a("a9e3"),{name:"MyPagination",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0}},data:function(){return{currentPageDiy:1,pageSizeDiy:10}},methods:{handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},handleSizeChange:function(e){this.$emit("handleSizeChange",e)}},watch:{currentPage:function(e,t){this.currentPageDiy=e},pageSize:function(e,t){this.pageSizeDiy=e}}}),o=i,r=(a("4e89"),a("2877")),s=Object(r["a"])(o,l,n,!1,null,"8756b672",null);t["a"]=s.exports},b459:function(e,t,a){},dff4:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[a("el-col",{attrs:{span:4}},[a("span",[e._v("我的积分修改记录")])]),a("el-col",{staticClass:"col-search",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"计分分类",clearable:""},model:{value:e.classify,callback:function(t){e.classify=t},expression:"classify"}},e._l(e.classifyOption,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"time-search"},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeSearch,callback:function(t){e.timeSearch=t},expression:"timeSearch"}})],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.recordCompute.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize),border:""}},[a("el-table-column",{attrs:{prop:"executorName",label:"执行部门"}}),a("el-table-column",{attrs:{prop:"classify",label:"计分分类"}}),a("el-table-column",{attrs:{prop:"reason",label:"计分原因"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showAttendanceDialog(t.row.attendanceId)}}},[e._v("对应考勤记录")]):a("span",[e._v(e._s(t.row.remark?t.row.remark:"无")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"addScore",label:"加分"}}),a("el-table-column",{attrs:{prop:"desScore",label:"减分"}}),a("el-table-column",{attrs:{prop:"gmtRecord",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFilter")(t.row.gmtRecord))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showDialog(t.row.id)}}},[e._v("申诉")]):e._e(),1===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.cancelAppeal(t.row.id)}}},[e._v("撤销申诉")]):e._e(),2===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showDialog(t.row.id)}}},[e._v("再次申诉")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[0===t.row.status?a("span",[e._v("无")]):e._e(),1===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.seeAppeal(t.row.id)}}},[e._v("申诉中")]):e._e(),2===t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.seeFeedback(t.row.id)}}},[e._v("查看反馈")]):e._e()],1)]}}])})],1),a("my-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.recordCompute.length},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}}),a("el-dialog",{attrs:{visible:e.dialogAppealVisible,title:"申诉"},on:{"update:visible":function(t){e.dialogAppealVisible=t},close:e.closeDialog}},[a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入申诉原因",maxlength:"255","show-word-limit":""},model:{value:e.appeal.reason,callback:function(t){e.$set(e.appeal,"reason",t)},expression:"appeal.reason"}}),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary"},on:{click:e.commitAppeal}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogSeeAppealVisible,title:"申诉原因"},on:{"update:visible":function(t){e.dialogSeeAppealVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:8,readonly:""},model:{value:e.appealText,callback:function(t){e.appealText=t},expression:"appealText"}}),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogSeeAppealVisible=!1}}},[e._v("关闭")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogSeeFeedbackVisible,title:"查看反馈"},on:{"update:visible":function(t){e.dialogSeeFeedbackVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:8,readonly:""},model:{value:e.feedbackText,callback:function(t){e.feedbackText=t},expression:"feedbackText"}}),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogSeeFeedbackVisible=!1}}},[e._v("关闭")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogSeeAttendanceVisible},on:{"update:visible":function(t){e.dialogSeeAttendanceVisible=t}}},[a("el-table",{attrs:{data:e.attendance,border:""}},[a("el-table-column",{attrs:{prop:"attDate",label:"日期"}}),a("el-table-column",{attrs:{prop:"timeWork1",label:"上班1打卡时间"}}),a("el-table-column",{attrs:{prop:"workResult1",label:"上班1打卡结果"}}),a("el-table-column",{attrs:{prop:"timeOff1",label:"下班1打卡时间"}}),a("el-table-column",{attrs:{prop:"offResult1",label:"下班1打卡结果"}}),a("el-table-column",{attrs:{prop:"timeWork2",label:"上班2打卡时间"}}),a("el-table-column",{attrs:{prop:"workResult2",label:"上班2打卡结果"}}),a("el-table-column",{attrs:{prop:"timeOff2",label:"下班2打卡时间"}}),a("el-table-column",{attrs:{prop:"offResult2",label:"下班2打卡结果"}})],1),a("div",{staticClass:"btn-area"},[a("el-button",{attrs:{type:"primary"},on:{click:e.closeAttendanceDialog}},[e._v("关闭")])],1)],1)],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("4de4"),a("d81d"),a("d3b7"),a("6d26")),o={name:"AppealManage",components:{MyPagination:i["a"]},data:function(){return{user:this.$store.state.user,records:[],currentPage:1,pageSize:10,dialogAppealVisible:!1,appeal:{recordId:"",reason:"",status:0},appealText:"",feedbackText:"",dialogSeeAppealVisible:!1,dialogSeeFeedbackVisible:!1,classify:"",classifyOption:[],timeSearch:"",attendance:[],dialogSeeAttendanceVisible:!1,loading:!0}},methods:{getTchRecord:function(){var e=this,t=new FormData;t.set("id",this.user.id),this.$api.getTchRecord(t).then((function(t){e.records=t.data?t.data:[]})).finally((function(){e.loading=!1}))},closeDialog:function(){this.dialogAppealVisible=!1,this.appeal.reason=""},showDialog:function(e){this.dialogAppealVisible=!0,this.appeal.recordId=e},commitAppeal:function(){var e=this;this.$api.tchAppeal(this.appeal).then((function(t){e.$showMsg("success",t.description),e.closeDialog(),e.getTchRecord()}))},cancelAppeal:function(e){var t=this;this.$confirm("确定取消申诉?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){var a=new FormData;a.set("recordId",e),t.$api.cancelAppeal(a).then((function(e){t.$showMsg("success",e.description),t.getTchRecord()}))}))},seeAppeal:function(e){var t=this;this.dialogSeeAppealVisible=!0;var a=new FormData;a.set("recordId",e),this.$api.seeAppeal(a).then((function(e){t.appealText=e.data}))},handleCurrentChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},seeFeedback:function(e){var t=this;this.dialogSeeFeedbackVisible=!0;var a=new FormData;a.set("recordId",e),this.$api.seeFeedback(a).then((function(e){t.feedbackText=e.data}))},showAttendanceDialog:function(e){var t=this;this.dialogSeeAttendanceVisible=!0;var a=new FormData;a.append("id",e),this.$api.getSpecialAttendance(a).then((function(e){t.attendance=e.data?[e.data]:[]}))},closeAttendanceDialog:function(){this.attendance=[],this.dialogSeeAttendanceVisible=!1},getClassify:function(){var e=this;this.$api.getClassify().then((function(t){e.classifyOption=t.data.map((function(e){return{label:e,value:e}}))}))}},computed:{recordCompute:function(){var e=this;return this.classify||this.timeSearch.length>1?this.records.filter((function(t){var a=new Date(t.gmtRecord);return(!e.classify||t.classify===e.classify)&&(!(e.timeSearch.length>1)||a.getTime()>=e.timeSearch[0].getTime()&&a.getTime()<=e.timeSearch[1].getTime())})):this.records}},mounted:function(){this.getTchRecord(),this.getClassify()}},r=o,s=(a("263b"),a("2877")),c=Object(s["a"])(r,l,n,!1,null,"0ae138ba",null);t["default"]=c.exports},f257:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d8083780.b8a00c6e.js.map